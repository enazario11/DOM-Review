.groups = "drop") %>%
filter(fish_ship == "Bycatch" | fish_ship == "Ship strikes" | fish_ship == "Overfishing" | fish_ship == "Entanglement" | fish_ship == "Avoid fisheries discharge")
lib_job_lit <- code_freq %>%
mutate(id = paste(bridge_barr, code_cat, code_name, sep = "_")) %>%
select(id)
freq_job_lit$id <- NA
for(i in 1:nrow(freq_job_lit)){
curr_code = freq_job_lit$sub_theme[i]
curr_id = lib_job_lit$id[agrepl(curr_code, lib_job_lit$id, 10)] #6 refers to the number of characters that can be diff
freq_job_lit$id[i] <- curr_id
}
View(freq_job_lit)
lib_job_lit[15]
lib_job_lit[15,]
freq_job_lit$id[freq_job_lit$sub_theme == "abiotic_data_availability"] <- "Bridge_Data bridge_Abiotic data availability"
freq_job_lit$id[freq_job_lit$sub_theme == "abiotic_indicators_of_target_species_presence"] <-
"Bridge_Ecological bridge_Abiotic indicators of target species presence"
freq_job_lit$id[freq_job_lit$sub_theme == "cost"] <-
"Barrier_Social barrier_Cost"
freq_job_lit$id[freq_job_lit$sub_theme == "discontinuity"] <-
"Barrier_Social barrier_Discontinuity"
freq_job_lit$id[freq_job_lit$sub_theme == "feasibility"] <-
"Bridge_Social bridge_Feasibility"
freq_job_lit$id[freq_job_lit$sub_theme == "model_abuse"] <-
"Barrier_Data barrier_Model abuse"
freq_job_lit$id[freq_job_lit$sub_theme == "resource_availability"] <-
"Bridge_Social bridge_Resource availability"
freq_job_lit <- freq_job_lit %>%
separate_wider_delim(id, delim = "_", names = c("bridge_barr", "code_cat", "code_name"))
freq_job_lit$bridge_barr <- factor(freq_job_lit$bridge_barr, levels = c("Bridge", "Barrier"))
?ifelse
freq_job_lit <- freq_job_lit %>%
mutate(fish_ship2 <- ifelse(fish_ship == "Ship strikes", "Shipping", "Fishing"))
freq_job_lit <- freq_job_lit %>%
mutate(fish_ship2 = ifelse(fish_ship == "Ship strikes", "Shipping", "Fishing"))
freq_job_lit <- freq_job_lit %>%
mutate(fish_ship = ifelse(fish_ship == "Ship strikes", "Shipping", "Fishing"))
#calculate proportions
freq_job_lit2 <- freq_job_lit %>%
group_by(fish_ship, bridge_barr) %>%
mutate(n_total = sum(total)) %>%
ungroup() %>%
group_by(fish_ship, bridge_barr, code_cat) %>%
mutate(n_subtotal = sum(total)) %>%
reframe(value = (n_subtotal/n_total)*100) %>%
ungroup() %>%
mutate(code_level = if_else(code_cat %in% c("Ecological barrier", "Ecological bridge"), "Ecological bridge or barrier",
if_else(code_cat %in% c("Data barrier", "Data bridge"), "Data bridge or barrier",
if_else(code_cat %in% c("Social barrier", "Social bridge"), "Social bridge or barrier", NA))),
id = paste(fish_ship, bridge_barr, code_cat)) %>%
distinct(id, .keep_all = TRUE)
View(freq_job_lit2)
#stacked bar plots
ggplot(freq_job_lit2, aes(fill=code_level, y=value, x=fish_ship)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","royalblue4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "right")+
xlab("") +
ylab("Proportion of theme (%)")
ggsave("figures/ms_figs/industry/stack_lit.png", width = 7, height = 6, units = c("in"))
#radar plots
freq_job_lit3 <- freq_job_lit %>%
group_by(fish_ship, bridge_barr) %>%
mutate(n_total = sum(total)) %>%
ungroup() %>%
group_by(fish_ship, bridge_barr, code_name) %>%
mutate(n_subtotal = sum(total)) %>%
reframe(value = (n_subtotal/n_total)*100) %>%
ungroup() %>%
mutate(id = paste(fish_ship, bridge_barr, code_name)) %>%
distinct(id, .keep_all = TRUE) %>%
select(-c(id))
View(freq_job_lit3)
top_lit <- freq_job_lit3 %>%
group_by(fish_ship, bridge_barr) %>%
arrange(desc(value)) %>%
top_n(3) %>%
ungroup() %>%
select(code_name)
View(top_lit)
top_bridge <- freq_job_lit3 %>%
subset(code_name %in% top_lit$code_name) %>%
filter(bridge_barr == "Bridge") %>%
pivot_wider(names_from = code_name, values_from = value) %>%
select(-bridge_barr) %>%
mutate_all(~replace_na(., 0))
top_barrier <- freq_job_lit3 %>%
subset(code_name %in% top_lit$code_name) %>%
filter(bridge_barr == "Barrier") %>%
pivot_wider(names_from = code_name, values_from = value) %>%
select(-bridge_barr) %>%
mutate_all(~replace_na(., 0))
View(top_bridge)
ggradar::ggradar(top_bridge,
values.radar = c(0, 16, 22),
background.circle.colour = "white",
axis.line.colour = "gray60",
gridline.min.colour = "gray60",
gridline.mid.colour = "gray60",
gridline.max.colour = "gray60",
group.colours = c("#F29325", "#007172"),
legend.position = "bottom",
fill = TRUE,
axis.label.size = 3)
ggradar::ggradar(top_bridge,
values.radar = c(0, 8, 16),
background.circle.colour = "white",
axis.line.colour = "gray60",
gridline.min.colour = "gray60",
gridline.mid.colour = "gray60",
gridline.max.colour = "gray60",
group.colours = c("#F29325", "#007172"),
legend.position = "bottom",
fill = TRUE,
axis.label.size = 3)
ggsave("figures/ms_figs/industry/radar_br_lit.png", height = 8, width = 8, units = c("in"))
View(top_barrier)
ggradar::ggradar(top_barrier,
values.radar = c(0, 17, 28),
background.circle.colour = "white",
axis.line.colour = "gray60",
gridline.min.colour = "gray60",
gridline.mid.colour = "gray60",
gridline.max.colour = "gray60",
group.colours = c("#F29325", "#007172"),
legend.position = "none",
fill = TRUE,
axis.label.size = 3)
37/2
ggradar::ggradar(top_barrier,
values.radar = c(0, 18, 37),
background.circle.colour = "white",
axis.line.colour = "gray60",
gridline.min.colour = "gray60",
gridline.mid.colour = "gray60",
gridline.max.colour = "gray60",
group.colours = c("#F29325", "#007172"),
legend.position = "none",
fill = TRUE,
axis.label.size = 3)
ggradar::ggradar(top_barrier,
values.radar = c(0, 17, 37),
background.circle.colour = "white",
axis.line.colour = "gray60",
gridline.min.colour = "gray60",
gridline.mid.colour = "gray60",
gridline.max.colour = "gray60",
group.colours = c("#F29325", "#007172"),
legend.position = "none",
fill = TRUE,
axis.label.size = 3)
ggsave("figures/ms_figs/industry/radar_ba_lit.png", height = 8, width = 8, units = c("in"))
#stacked bar plots
ggplot(freq_job_lit2, aes(fill=code_level, y=value, x=fish_ship)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "right")+
xlab("") +
ylab("Proportion of theme (%)")
ggsave("figures/ms_figs/industry/stack_lit.png", width = 7, height = 6, units = c("in"))
#format data
freq_job_survey <- code_vars_s %>%
select(c(1, 21:54)) %>%
janitor::clean_names() %>%
pivot_longer(2:35, names_to = "sub_theme", values_to = "total") %>%
group_by(survey, sub_theme) %>%
summarise(total = sum(total),
.groups = "drop") %>%
mutate(fish_ship = ifelse(str_detect(survey, "WhaleWatch"), "Shipping", "Fishing"))
View(freq_job_survey)
head(code_vars_s)
View(code_vars_s)
#format data
freq_pos_survey <- code_vars_s %>%
select(c(6:10, 21:54)) %>%
janitor::clean_names()
View(freq_pos_survey)
#format data
freq_pos_survey <- code_vars_s %>%
select(c(6:10, 21:54)) %>%
janitor::clean_names() %>%
pivot_longer(1:5, names_to = "test", values_to = "position") %>%
select(-c(test))
#format data
freq_pos_survey <- code_vars_s %>%
select(c(6:10, 21:54)) %>%
janitor::clean_names() %>%
pivot_longer(1:5, names_to = "test", values_to = "position") %>%
select(-c(test)) %>%
pivot_longer(1:34, names_to = "sub_theme", values_to = "total") %>%
group_by(position, sub_theme) %>%
summarise(total = sum(total),
.groups = "drop")
unique(freq_pos_survey$position)
#format data
freq_pos_survey <- code_vars_s %>%
select(c(6:10, 21:54)) %>%
janitor::clean_names() %>%
pivot_longer(1:5, names_to = "test", values_to = "position") %>%
select(-c(test)) %>%
pivot_longer(1:34, names_to = "sub_theme", values_to = "total") %>%
group_by(position, sub_theme) %>%
summarise(total = sum(total),
.groups = "drop") %>%
drop_na(position)
unique(freq_pos_survey$position)
lib_job_survey <- code_freq_s %>%
mutate(id = paste(bridge_barr, code_cat, code_name, sep = "_")) %>%
select(id)
freq_pos_survey$id <- NA
for(i in 1:nrow(freq_pos_survey)){
curr_code = freq_pos_survey$sub_theme[i]
curr_id = lib_pos_survey$id[agrepl(curr_code, lib_pos_survey$id, 6)]
freq_pos_survey$id[i] <- curr_id
}
for(i in 1:nrow(freq_pos_survey)){
curr_code = freq_pos_survey$sub_theme[i]
curr_id = lib_job_survey$id[agrepl(curr_code, lib_job_survey$id, 6)]
freq_pos_survey$id[i] <- curr_id
}
freq_pos_survey$id[freq_pos_survey$sub_theme == "stigmatization"] <- "Barrier_Social barrier_Stigmatization"
freq_pos_survey$id[freq_pos_survey$sub_theme == "cost"] <- "Barrier_Social barrier_Cost"
freq_pos_survey <- freq_pos_survey %>%
separate_wider_delim(id, delim = "_", names = c("bridge_barr", "code_cat", "code_name"))
freq_pos_survey$bridge_barr <- factor(freq_pos_survey$bridge_barr, levels = c("Bridge", "Barrier"))
#calculate proportions
freq_pos_survey2 <- freq_pos_survey %>%
group_by(position, bridge_barr) %>%
mutate(n_total = sum(total)) %>%
ungroup() %>%
group_by(position, bridge_barr, code_cat) %>%
mutate(n_subtotal = sum(total)) %>%
reframe(value = (n_subtotal/n_total)*100) %>%
ungroup() %>%
mutate(code_level = if_else(code_cat %in% c("Ecological barrier", "Ecological bridge"), "Ecological bridge or barrier",
if_else(code_cat %in% c("Data barrier", "Data bridge"), "Data bridge or barrier",
if_else(code_cat %in% c("Social barrier", "Social bridge"), "Social bridge or barrier",
if_else(code_cat %in% c("Implementation bridge", "Implementation barrier"), "Implementation bridge or barrier", NA)))),
id = paste(fish_ship, bridge_barr, code_cat)) %>%
distinct(id, .keep_all = TRUE)
#calculate proportions
freq_pos_survey2 <- freq_pos_survey %>%
group_by(position, bridge_barr) %>%
mutate(n_total = sum(total)) %>%
ungroup() %>%
group_by(position, bridge_barr, code_cat) %>%
mutate(n_subtotal = sum(total)) %>%
reframe(value = (n_subtotal/n_total)*100) %>%
ungroup() %>%
mutate(code_level = if_else(code_cat %in% c("Ecological barrier", "Ecological bridge"), "Ecological bridge or barrier",
if_else(code_cat %in% c("Data barrier", "Data bridge"), "Data bridge or barrier",
if_else(code_cat %in% c("Social barrier", "Social bridge"), "Social bridge or barrier",
if_else(code_cat %in% c("Implementation bridge", "Implementation barrier"), "Implementation bridge or barrier", NA)))),
id = paste(position, bridge_barr, code_cat)) %>%
distinct(id, .keep_all = TRUE)
View(freq_pos_survey2)
#stacked bar plots
ggplot(freq_pos_survey2, aes(fill=code_level, y=value, x=position)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","royalblue4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "right")+
xlab("") +
ylab("Proportion of theme (%)")
#stacked bar plots
ggplot(freq_pos_survey2, aes(fill=code_level, y=value, x=position)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","royalblue4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "right")+
xlab("") +
ylab("Proportion of theme (%)")+
theme(axis.text.x = element_text(size = 14, color = "black", angle = 45, hjust = 1))
ggsave("figures/ms_figs/position/stack_survey.png", width = 7, height = 6, units = c("in"))
ggsave("figures/ms_figs/position/stack_survey.png", width = 9, height = 6, units = c("in"))
#stacked bar plots
ggplot(freq_pos_survey2, aes(fill=code_level, y=value, x=position)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","royalblue4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "top")+
xlab("") +
ylab("Proportion of theme (%)")+
theme(axis.text.x = element_text(size = 14, color = "black", angle = 45, hjust = 1))
ggsave("figures/ms_figs/position/stack_survey.png", width = 9, height = 6, units = c("in"))
#stacked bar plots
ggplot(freq_pos_survey2, aes(fill=code_level, y=value, x=position)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","royalblue4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "top")+
xlab("") +
ylab("Proportion of theme (%)")+
theme(axis.text.x = element_text(size = 13, color = "black", angle = 45, hjust = 1))
ggsave("figures/ms_figs/position/stack_survey.png", width = 9, height = 6, units = c("in"))
ggsave("figures/ms_figs/position/stack_survey.png", width = 10, height = 6, units = c("in"))
ggsave("figures/ms_figs/position/stack_survey.png", width = 10, height = 6, units = c("in"))
#stacked bar plots
ggplot(freq_pos_survey2, aes(fill=code_level, y=value, x=position)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","royalblue4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "top")+
xlab("") +
ylab("Proportion of theme (%)")+
theme(axis.text.x = element_text(size = 12, color = "black", angle = 45, hjust = 1))
ggsave("figures/ms_figs/position/stack_survey.png", width = 10, height = 6, units = c("in"))
ggsave("figures/ms_figs/position/stack_survey.png", width = 10, height = 6, units = c("in"))
#stacked bar plots
ggplot(freq_pos_survey2, aes(fill=code_level, y=value, x=position)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","royalblue4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "top")+
xlab("") +
ylab("Proportion of theme (%)")+
theme(axis.text.x = element_text(size = 12, color = "black", angle = 85, hjust = 1))
#stacked bar plots
ggplot(freq_pos_survey2, aes(fill=code_level, y=value, x=position)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","royalblue4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "top")+
xlab("") +
ylab("Proportion of theme (%)")+
theme(axis.text.x = element_text(size = 12, color = "black", angle = 90, hjust = 1))
#stacked bar plots
ggplot(freq_pos_survey2, aes(fill=code_level, y=value, x=position)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","royalblue4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "top")+
xlab("") +
ylab("Proportion of theme (%)")+
theme(axis.text.x = element_text(size = 14, color = "black", angle = 90, hjust = 1))
ggsave("figures/ms_figs/position/stack_survey.png", width = 8, height = 6, units = c("in"))
ggsave("figures/ms_figs/position/stack_survey.png", width = 7, height = 6, units = c("in"))
#stacked bar plots
ggplot(freq_pos_survey2, aes(fill=code_level, y=value, x=position)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","royalblue4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "top")+
xlab("") +
ylab("Proportion of theme (%)")+
theme(axis.text.x = element_text(size = 14, color = "black", angle = 60, hjust = 1))
#stacked bar plots
ggplot(freq_pos_survey2, aes(fill=code_level, y=value, x=position)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","royalblue4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "top")+
xlab("") +
ylab("Proportion of theme (%)")+
theme(axis.text.x = element_text(size = 14, color = "black", angle = 50, hjust = 1))
ggsave("figures/ms_figs/position/stack_survey.png", width = 8, height = 6, units = c("in"))
#stacked bar plots
ggplot(freq_pos_survey2, aes(fill=code_level, y=value, x=position)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","royalblue4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "top")+
xlab("") +
ylab("Proportion of theme (%)")+
theme(axis.text.x = element_text(size = 13, color = "black", angle = 50, hjust = 1))
ggsave("figures/ms_figs/position/stack_survey.png", width = 9, height = 7, units = c("in"))
ggsave("figures/ms_figs/position/stack_survey.png", width = 9, height = 7, units = c("in"))
ggsave("figures/ms_figs/position/stack_survey.png", width = 10, height = 7, units = c("in"))
ggsave("figures/ms_figs/position/stack_survey.png", width = 10, height = 7, units = c("in"))
#stacked bar plots
ggplot(freq_pos_survey2, aes(fill=code_level, y=value, x=position)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","royalblue4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "top")+
xlab("") +
ylab("Proportion of theme (%)")+
theme(axis.text.x = element_text(size = 13, color = "black", angle = 55, hjust = 1))
ggsave("figures/ms_figs/position/stack_survey.png", width = 10, height = 7, units = c("in"))
ggsave("figures/ms_figs/position/stack_survey.png", width = 9, height = 7, units = c("in"))
ggsave("figures/ms_figs/position/stack_survey.png", width = 9.5, height = 7, units = c("in"))
ggsave("figures/ms_figs/position/stack_survey.png", width = 9.5, height = 7, units = c("in"))
ggsave("figures/ms_figs/position/stack_survey.png", width = 10, height = 8, units = c("in"))
#stacked bar plots
ggplot(freq_pos_survey2, aes(fill=code_level, y=value, x=position)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","royalblue4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "top")+
xlab("") +
ylab("Proportion of theme (%)")+
theme(axis.text.x = element_text(size = 14, color = "black", angle = 55, hjust = 1))
ggsave("figures/ms_figs/position/stack_survey.png", width = 10, height = 8, units = c("in"))
#stacked bar plots
ggplot(freq_pos_survey2, aes(fill=code_level, y=value, x=position)) +
geom_bar(position="stack", stat="identity") +
scale_fill_manual(values = c("#CFE2F3", "#C5E0B4","royalblue4","#45818E")) +
facet_wrap(~bridge_barr) +
labs(fill = "Sub-theme") +
theme_ms() +
theme(legend.position = "top")+
xlab("") +
ylab("Proportion of theme (%)")+
theme(axis.text.x = element_text(size = 14, color = "black", angle = 60, hjust = 1))
ggsave("figures/ms_figs/position/stack_survey.png", width = 10, height = 8, units = c("in"))
ggsave("figures/ms_figs/position/stack_survey.png", width = 10, height = 8, units = c("in"))
head(code_vars_s)
#get sample sizes of survey respondants by position
n_pos_survey <- code_vars_s %>%
select(c(6:10, 21:54)) %>%
janitor::clean_names() %>%
pivot_longer(1:5, names_to = "test", values_to = "position")
View(n_pos_survey)
#get sample sizes of survey respondants by position
n_pos_survey <- code_vars_s %>%
select(c(6:10, 21:54)) %>%
janitor::clean_names() %>%
pivot_longer(1:5, names_to = "test", values_to = "position") %>%
select(-c(test))
#get sample sizes of survey respondants by position
n_pos_survey <- code_vars_s %>%
select(c(6:10, 21:54)) %>%
janitor::clean_names() %>%
pivot_longer(1:5, names_to = "test", values_to = "position") %>%
select(-c(test)) %>%
drop_na(position)
n_pos_survey$id <- NA
#get sample sizes of survey respondants by position
n_pos_survey <- code_vars_s %>%
select(c(6:10, 21:54)) %>%
janitor::clean_names() %>%
pivot_longer(1:5, names_to = "test", values_to = "position") %>%
select(-c(test)) %>%
pivot_longer(1:34, names_to = "sub_theme", values_to = "total") %>%
group_by(position, sub_theme) %>%
summarise(total = sum(total),
.groups = "drop") %>%
drop_na(position)
n_pos_survey$id <- NA
for(i in 1:nrow(n_pos_survey)){
curr_code = n_pos_survey$sub_theme[i]
curr_id = lib_job_survey$id[agrepl(curr_code, lib_job_survey$id, 6)]
n_pos_survey$id[i] <- curr_id
}
n_pos_survey$id[n_pos_survey$sub_theme == "stigmatization"] <- "Barrier_Social barrier_Stigmatization"
n_pos_survey$id[n_pos_survey$sub_theme == "cost"] <- "Barrier_Social barrier_Cost"
n_pos_survey <- n_pos_survey %>%
separate_wider_delim(id, delim = "_", names = c("bridge_barr", "code_cat", "code_name"))
n_pos_survey$bridge_barr <- factor(n_pos_survey$bridge_barr, levels = c("Bridge", "Barrier"))
code_vars_s
#get sample sizes of survey respondants by position
n_pos_survey <- code_vars_s %>%
select(c(6:10, 21:54)) %>%
janitor::clean_names() %>%
pivot_longer(1:5, names_to = "test", values_to = "position") %>%
select(-c(test))
#get sample sizes of survey respondants by position
n_pos_survey <- code_vars_s %>%
select(c(6:10, 21:54)) %>%
janitor::clean_names() %>%
pivot_longer(1:5, names_to = "test", values_to = "position") %>%
select(-c(test)) %>%
drop_na(position)
table(n_pos_survey$position)
#get sample sizes of survey respondants by position
n_job_survey <- code_vars_s %>%
select(c(1, 21:54)) %>%
janitor::clean_names()
View(n_job_survey)
table(n_job_survey$survey)
head(code_vars)
#get sample sizes of survey respondants by position
n_job_lit <- code_vars %>%
select(c(1, 27:29, 33:60)) %>%
janitor::clean_names()  %>%
pivot_longer(2:4, names_to = "test", values_to = "fish_ship") %>%
select(-c(test)) %>%
filter(fish_ship == "Bycatch" | fish_ship == "Ship strikes" | fish_ship == "Overfishing" | fish_ship == "Entanglement" | fish_ship == "Avoid fisheries discharge") %>%
mutate(fish_ship = ifelse(fish_ship == "Ship strikes", "Shipping", "Fishing"))
table(n_job_lit$fish_ship)
